<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MindLink - 持续清醒的第二大脑</title>
    <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="/static/css/style.css?v=20260105d">
</head>

<body>
    <div class="app">
        <!-- Sidebar: Mind List -->
        <aside class="sidebar">
            <header class="sidebar__header">
                <div class="brand">
                    <img src="/static/brand/logo.svg" alt="" class="brand__logo">
                    <span class="brand__text">MindLink</span>
                </div>
                <p class="sidebar__slogan">把想法变成可演化的记忆单元<br>把单元连接成第二大脑神经网络</p>
                <button id="createMindBtn" class="btn btn--create">+ 新建 Mind</button>
            </header>
            <section id="mindList" class="sidebar__list">
                <!-- Dynamically populated Mind list -->
            </section>
            <footer class="sidebar__footer">
                <span id="currentUser" class="sidebar__user"></span>
                <a href="/admin" id="adminLink" class="sidebar__admin-link" hidden>提示词管理</a>
                <button id="logoutBtn" class="btn btn--logout">退出登录</button>
            </footer>
        </aside>

        <!-- Main Content Area -->
        <main class="main">
            <!-- Empty State -->
            <section id="emptyState" class="empty-state">
                <div class="empty-state__icon">✧</div>
                <h2 class="empty-state__title">选择或创建一个 Mind</h2>
                <p class="empty-state__desc">开始整理你的碎碎念与洞察</p>
            </section>

            <!-- Mind Detail View -->
            <section id="mindDetail" class="mind-detail" hidden>
                <header class="detail__header">
                    <h2 id="mindTitle" class="detail__title">Mind 标题</h2>
                </header>

                <!-- AI Generated Summary and Tags -->
                <div id="summaryArea" class="detail__summary" hidden>
                    <p id="aiBrief" class="detail__brief"></p>
                    <div id="tagCloud" class="detail__tags"></div>
                </div>

                <!-- Tab Navigation -->
                <nav class="tabs">
                    <button class="tabs__btn is-active" data-tab="feed">投喂</button>
                    <button class="tabs__btn" data-tab="structure">结构</button>
                    <button class="tabs__btn" data-tab="timeline">时间轴</button>
                    <button class="tabs__btn" data-tab="chat">对话</button>
                    <button class="tabs__btn" data-tab="narrative">叙事</button>
                    <button class="tabs__btn" data-tab="output">输出</button>
                </nav>

                <!-- Tab Content Container -->
                <div class="tab-content">
                    <!-- Tab 1: Feed (投喂) -->
                    <section id="feedTab" class="tab-pane is-active">
                        <div class="feed__input-area">
                            <textarea id="feedInput" class="feed__textarea"
                                placeholder="想到什么写什么，AI 会自动去噪处理..."></textarea>
                            <button id="feedBtn" class="btn btn--primary feed__submit">记录思想</button>
                        </div>
                        <div id="feedStatus" class="feed__status"></div>
                    </section>

                    <!-- Tab 2: Structure (结构) -->
                    <section id="structureTab" class="tab-pane">
                        <header class="tab-pane__header">提炼核心认知，结构化展示</header>
                        <div id="structureContent" class="structure__content"></div>
                    </section>

                    <!-- Tab 3: Timeline (时间轴) -->
                    <section id="timelineTab" class="tab-pane">
                        <header class="tab-pane__header">去噪后的原始记录，按时间轴回溯</header>
                        <div id="timelineContent" class="timeline__content"></div>
                    </section>

                    <!-- Tab 4: Chat (对话) -->
                    <section id="chatTab" class="tab-pane tab-pane--chat">
                        <header class="chat__controls">
                            <select id="chatModel" class="chat__select">
                                <option value="google_gemini_3_flash">Gemini 3 Flash</option>
                                <option value="google_gemini_3_pro">Gemini 3 Pro</option>
                                <option value="plato_gpt_5_2_chat">GPT-5.2 Plato</option>
                            </select>
                            <select id="chatStyle" class="chat__select">
                                <option value="default">理性分析</option>
                                <option value="socratic">苏格拉底式</option>
                                <option value="creative">创意发散</option>
                            </select>
                            <button id="clearChatBtn" class="btn btn--secondary">刷新</button>
                        </header>
                        <div id="chatMessages" class="chat__messages">
                            <div class="chat__welcome">
                                <p>我已经了解了你关于这个主题的所有想法。</p>
                                <p>有什么想和我讨论的吗？</p>
                            </div>
                        </div>
                        <div class="chat__input-area">
                            <textarea id="chatInput" class="chat__input" placeholder="输入你想讨论的内容..."
                                rows="1"></textarea>
                            <button id="sendChatBtn" class="btn btn--send">↑</button>
                        </div>
                    </section>

                    <!-- Tab 5: Narrative (叙事) -->
                    <section id="narrativeTab" class="tab-pane">
                        <header class="tab-pane__header">
                            <p>整合所有记录，生成连贯的思想叙事</p>
                            <button id="generateNarrativeBtn" class="btn btn--secondary">生成叙事</button>
                        </header>
                        <div id="narrativeContent" class="narrative__content"></div>
                    </section>

                    <!-- Tab 6: Output (输出) -->
                    <section id="outputTab" class="tab-pane">
                        <div class="output__input-area">
                            <input type="text" id="outputInstruction" class="output__input"
                                placeholder="例如：写一段给投资人看的说明">
                            <button id="outputBtn" class="btn btn--primary">生成</button>
                        </div>
                        <div id="outputResult" class="output__result"></div>
                    </section>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal: Create Mind -->
    <dialog id="createMindModal" class="modal">
        <div class="modal__content">
            <h3 class="modal__title">创建新的 Mind</h3>
            <p class="modal__desc">为一个新的话题、项目或思考方向命名</p>
            <input type="text" id="newMindTitle" class="modal__input" placeholder="例如：我的 2024 产品观">
            <div class="modal__actions">
                <button id="modalCancelBtn" class="btn btn--text">取消</button>
                <button id="modalCreateBtn" class="btn btn--primary">创建档案</button>
            </div>
        </div>
    </dialog>

    <!-- Modal: Edit Feed -->
    <dialog id="editFeedModal" class="modal">
        <div class="modal__content">
            <h3 class="modal__title">编辑记录</h3>
            <input type="hidden" id="editFeedId">
            <textarea id="editFeedContent" class="modal__textarea" rows="5" placeholder="输入内容..."></textarea>
            <div class="modal__actions">
                <button id="editCancelBtn" class="btn btn--text">取消</button>
                <button id="editSaveBtn" class="btn btn--primary">保存</button>
            </div>
        </div>
    </dialog>

    <script src="/static/js/app.js?v=20260105d"></script>
</body>

</html>
