---
name: commit
description: Git 提交规范。当用户要求提交代码、备份、commit、推送时自动加载。
---

# Git 提交规范

**文档维护声明**：本文档可以修改。如果发现内容与实际不符、过时、或有错误，必须修改。但保持精简，避免臃肿。

---

## 提交前必须检查（核心流程）

```
准备 commit 前，必须回答以下问题：

1. 这次修改过程中，有没有发现文档描述与实际不符？
2. 这次修改是否需要更新相关文档？
3. 是否有必要新增文档内容？
4. LESSONS.md 是否需要新增教训？

→ 有则先修改文档，再 commit
→ 没有则直接 commit
```

**重点检查的文档**：
- `CLAUDE.md` — 协作规范变化时
- `docs/LESSONS.md` — 遇到新问题并解决时
- `docs/API_REFERENCE.md` — API 接口变化时
- `.claude/skills/*.md` — 专题规范变化时

---

## 提交命令

```bash
# 修改前先备份
git add -A && git commit -m "备份：修改xxx前"

# 修改后提交
git add -A && git commit -m "feat: 描述改动"
```

---

## 提交前缀

| 前缀 | 用途 | 示例 |
|------|------|------|
| `feat:` | 新功能 | feat: 添加导出 PDF 功能 |
| `fix:` | Bug 修复 | fix: 修复登录页面崩溃 |
| `docs:` | 文档更新 | docs: 更新 API 文档 |
| `refactor:` | 重构 | refactor: 简化用户认证逻辑 |
| `style:` | 样式调整 | style: 调整按钮颜色 |

---

## 禁止提交

| 文件/目录 | 原因 |
|-----------|------|
| `.env` | 环境变量，含敏感信息 |
| `data/` | 运行时数据 |
| `logs/` | 日志文件 |

---

## 验证清单

提交前确认：
- [ ] `git status` 检查改动范围
- [ ] 没有误改不相关文件
- [ ] 没有提交敏感文件
- [ ] 文档已同步更新（如需要）

---

**最后更新**: 2026-01-11
