---
name: commit
description: Git 提交规范。当用户要求提交代码、备份、commit、推送时自动加载。
---

# Git 提交规范

**文档维护声明**：本文档可以修改。如果发现内容与实际不符、过时、或有错误，必须修改。但保持精简，避免臃肿。

---

## 两种提交场景

### 1. 任务前备份（快速）

**触发词**：备份、backup、"改之前先提交"、"先备份"

**流程**：直接提交，无需检查文档。

```bash
git add -A && git commit -m "备份：修改xxx前"
```

### 2. 任务后提交（完整检查）

**触发词**：提交、commit、"改完了"、"帮我提交"

**流程**：检查文档 → 输出检查结果 → 等待用户确认 → 提交

---

## 必须输出的格式

任务后提交时，**必须**输出以下格式（不输出就没完成任务）：

```
**[提交检查]**
- 本次改动：[简述做了什么]
- 文档影响：无需更新 / 已更新 [文件名]
- 教训建议：无 / 建议记录"[简述教训]"（请确认）
```

**等用户确认后**，再执行 git commit。

---

## 提交前检查（原则导向）

**不是检查固定的文档列表，而是回答两个问题：**

### 问题 1：这次改动是否影响了某些文档的准确性？

- 想一想：这次改了什么？
- 有没有文档描述了相关的内容？
- 如果有，那个描述还准确吗？

### 问题 2：这次过程中有没有发现任何文档的错误？

- 不管是不是这次改动造成的
- **只要发现了错误，就必须修正**
- 不能袖手旁观

### 处理方式

| 情况 | 处理 |
|------|------|
| 改动影响了某文档的准确性 | 先更新文档，再提交 |
| 发现了文档错误 | 先修正错误，再提交 |
| 遇到新问题并解决了 | 考虑是否记入 LESSONS.md |
| 都没有 | 直接提交 |

---

## 提交命令

```bash
git add -A && git commit -m "feat: 描述改动"
```

## 提交前缀

| 前缀 | 用途 |
|------|------|
| `feat:` | 新功能 |
| `fix:` | Bug 修复 |
| `docs:` | 文档更新 |
| `refactor:` | 重构 |

---

## 禁止提交

| 文件/目录 | 原因 |
|-----------|------|
| `.env` | 环境变量，含敏感信息 |
| `data/` | 运行时数据 |
| `logs/` | 日志文件 |

---

**最后更新**: 2026-01-12
