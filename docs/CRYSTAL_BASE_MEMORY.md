# 晶体底层记忆 (Crystal Base Memory) - 概念文档

## 核心理念

MindLink 的每个 **Mind（思想晶体）** 如同大脑中的神经元。**晶体底层记忆** 是这些神经元之间的"弱链接"，提供共享的基础概念定义，让系统像"老搭档"一样理解用户的私有语境。

```
┌─────────────────────────────────────────────────────────────┐
│                    晶体底层记忆（全局记忆）                    │
│     ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐      │
│     │ 粒子星纬 │  │  GXA   │  │  星链   │  │ 纽崔亚  │ ...  │
│     └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘      │
└──────────┼────────────┼────────────┼────────────┼────────────┘
           │ 弱链接     │            │            │
     ┌─────▼─────┐ ┌────▼────┐ ┌────▼────┐ ┌────▼────┐
     │ Mind A   │ │ Mind B  │ │ Mind C  │ │ Mind D  │
     └───────────┘ └──────────┘ └──────────┘ └──────────┘
```

## 设计原则

### 1. 记录标准：宁缺毿滥

只录入符合以下条件的信息：
- **可引用性**：后续可能被其他晶体引用
- **无歧义性**：定义清晰，不会随语境变化
- **自包含性**：每条定义独立可理解，包含归属上下文

### 2. 更新协议：最新即当前

当用户投喂新信息时，系统动态覆盖旧定义，而非堆叠。认知实时演进。

### 3. 使用时机

| 功能 | 是否使用记忆 | 原因 |
|------|-------------|------|
| 投喂/去噪 | ❌ | 记录原始想法，用户知道背景 |
| 时间轴/结构 | ❌ | 展示/蒸馏当前晶体内容 |
| **叙事** | ✅ | 整合时需要理解跨晶体概念 |
| **输出** | ✅ | 表达时需要完整背景 |
| **对话** | ✅ | 理解用户问题需要上下文 |

### 4. 检索原则：不多不少，刚刚好

- AI 知道自己有"全局记忆"可查询
- 检测到上下文缺失时主动检索
- 只注入相关的 5-10 条，避免信息过载

## 技术架构

### 数据模型

```sql
CREATE TABLE base_memory (
    id INTEGER PRIMARY KEY,
    user_id INTEGER NOT NULL,
    key TEXT NOT NULL,           -- 锚点名称
    definition TEXT NOT NULL,    -- 自包含定义
    category TEXT,               -- person|project|brand|concept|goal
    aliases TEXT,                -- 别名 JSON
    source_mind_id TEXT,         -- 来源晶体
    version INTEGER DEFAULT 1,   -- 版本号
    is_active INTEGER DEFAULT 1,
    UNIQUE(user_id, key)
);
```

### 分类说明

| 分类 | 说明 | 示例 |
|------|------|------|
| person | 人名及身份 | "张三，技术合伙人" |
| project | 用户自己的项目 | "MindLink，AI思维助手" |
| brand | 品牌/竞品/合作方 | "纽崔亚，GXA的竞品" |
| concept | 核心概念 | "通用记忆，MindLink的底层模块" |
| goal | 当前目标/状态 | "目前处于融资阶段" |

## 实现状态

- **Phase 1（录入）**: ✅ 已完成
- **Phase 2（检索）**: 🚧 开发中
