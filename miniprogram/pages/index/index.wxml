<!-- é¦–é¡µï¼šMind åˆ—è¡¨ -->
<view class="container">
  <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
  <view class="header">
    <text class="header-title">MindLink</text>
    <view class="header-btn" bindtap="showCreateModal" wx:if="{{isLoggedIn}}">+</view>
  </view>

  <!-- æœªç™»å½•çŠ¶æ€ -->
  <view class="login-prompt" wx:if="{{!isLoggedIn && !loading}}">
    <view class="login-icon">ğŸ”</view>
    <text class="login-title">è¯·å…ˆç»‘å®šè´¦å·</text>
    <text class="login-hint">ä½¿ç”¨ MindLink è´¦å·ç™»å½•åå³å¯ä½¿ç”¨</text>
    <view class="login-btn" bindtap="goToLogin">ç»‘å®šè´¦å·</view>
  </view>

  <!-- å·²ç™»å½•ï¼šMind åˆ—è¡¨ -->
  <scroll-view class="mind-list" scroll-y enhanced show-scrollbar="{{false}}" wx:if="{{isLoggedIn}}">
    <!-- ç”¨æˆ·ä¿¡æ¯ -->
    <view class="user-bar" wx:if="{{userInfo}}">
      <text class="user-name">ğŸ‘¤ {{userInfo.username}}</text>
    </view>

    <!-- åˆ—è¡¨åŒºåŸŸ -->
    <block wx:if="{{minds.length > 0}}">
      <view
        class="mind-item"
        wx:for="{{minds}}"
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="goToMind"
        bindlongpress="showDeleteConfirm"
      >
        <view class="mind-content">
          <text class="mind-title">{{item.title}}</text>
          <text class="mind-summary" wx:if="{{item.summary}}">{{item.summary}}</text>
          <text class="mind-date">{{item.updated_at}}</text>
        </view>
        <text class="mind-arrow">â€º</text>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{minds.length === 0 && !loading}}">
      <view class="empty-icon"></view>
      <text class="empty-title">æš‚æ— æ€ç»´æ™¶ä½“</text>
      <text class="empty-hint">ç‚¹å‡»å³ä¸Šè§’ + åˆ›å»ºç¬¬ä¸€ä¸ª</text>
    </view>

    <!-- åŠ è½½ä¸­ -->
    <view class="loading-state" wx:if="{{loading}}">
      <text class="loading-text loading-pulse">åŠ è½½ä¸­...</text>
    </view>
  </scroll-view>

  <!-- æœªç™»å½•åŠ è½½ä¸­ -->
  <view class="loading-state" wx:if="{{!isLoggedIn && loading}}">
    <text class="loading-text loading-pulse">æ£€æŸ¥ç™»å½•çŠ¶æ€...</text>
  </view>
</view>

<!-- åˆ›å»ºå¼¹çª— -->
<view class="modal-mask" wx:if="{{showModal}}" bindtap="hideCreateModal">
  <view class="modal-content" catchtap="stopPropagation">
    <text class="modal-title">æ–°å»ºæ€ç»´æ™¶ä½“</text>
    <text class="modal-hint">ä¸ºè¿™ä¸ªæ€è€ƒæ–¹å‘å‘½å</text>
    <input
      class="modal-input"
      style="color: #fff;"
      placeholder="ä¾‹å¦‚ï¼šäº§å“å“²å­¦ã€ç”Ÿæ´»çäº‹..."
      placeholder-class="placeholder"
      value="{{newTitle}}"
      bindinput="onTitleInput"
      focus="{{showModal}}"
    />
    <view class="modal-actions">
      <view class="modal-btn cancel" bindtap="hideCreateModal">å–æ¶ˆ</view>
      <view class="modal-btn confirm" bindtap="createMind">åˆ›å»º</view>
    </view>
  </view>
</view>
